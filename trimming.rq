PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

DELETE { ?s ?p ?o . }
INSERT { ?s ?p ?cleaned_with_lang . }

WHERE {
  ### Predicate filtering ###
  # Any predicate
  ?s ?p ?o .
  # or single predicate
  #?s dcterms:title ?o .
  
  ### Optional fitlering by class of subject ###
  #?s a foaf:Person .

  ### Optional filter by language tag ###
  #FILTER(langMatches(lang(?o), 'cs'))
  
  
  
  ### Don't modify below this line ### 
  FILTER(isLiteral(?o))
  
  BIND('^\\s+(.*?)\\s*$|^(.*?)\\s+$' 
    AS ?regexp)
  FILTER(REGEX(?o, ?regexp))
  BIND(REPLACE(?o, ?regexp, '$1$2') 
    AS ?cleaned)
  
  BIND(
    IF(
      lang(?o) = '', 
      ?cleaned, 
      STRLANG(?cleaned, ?lang)) 
    AS ?cleaned_with_lang)
}